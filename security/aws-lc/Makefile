PORTNAME=	aws-lc
PORTVERSION=	1.36.1
DISTVERSIONPREFIX=	v
CATEGORIES=	security

MAINTAINER=	sunpoet@FreeBSD.org
COMMENT=	AWS libcrypto
WWW=		https://github.com/aws/aws-lc

# It is actually (APACHE20 or ISCL) and BSD3CLAUSE and MIT and OpenSSL
LICENSE=	APACHE20 BSD3CLAUSE ISCL MIT OpenSSL
LICENSE_COMB=	multi
LICENSE_FILE=	${WRKSRC}/LICENSE

USES=		cmake pathfix

CMAKE_OFF=	BUILD_TESTING \
		ENABLE_DATA_INDEPENDENT_TIMING \
		ENABLE_DILITHIUM \
		ENABLE_FIPS_ENTROPY_CPU_JITTER \
		MY_ASSEMBLER_IS_TOO_OLD_FOR_512AVX \
		MY_ASSEMBLER_IS_TOO_OLD_FOR_AVX
CMAKE_ON=	BUILD_LIBSSL \
		BUILD_TOOL \
		DISABLE_GO \
		DISABLE_PERL
CMAKE_TESTING_ON=	BUILD_TESTING
CMAKE_TESTING_TARGET=	all_tests
#CMAKE_TESTING_TARGET=	run_tests

USE_GITHUB=	yes
GH_ACCOUNT=	aws

CONFLICTS_INSTALL=	boringssl libressl* openssl*

.include <bsd.port.mk>
