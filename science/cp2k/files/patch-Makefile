--- Makefile.orig	2024-08-06 12:33:49 UTC
+++ Makefile
@@ -11,7 +11,7 @@ endif
 export CP2KHOME
 endif
 
-ARCH         := local
+XARCH         := local
 export VERSION=ssmp
 
 MAKEFILE     := $(CP2KHOME)/Makefile
@@ -26,7 +26,7 @@ SRCDIR       := $(CP2KHOME)/src
 DOXIFYOBJDIR := $(CP2KHOME)/obj/doxified
 TOOLSRC      := $(CP2KHOME)/tools
 SRCDIR       := $(CP2KHOME)/src
-EXEDIR       := $(MAINEXEDIR)/$(ARCH)
+EXEDIR       := $(MAINEXEDIR)/$(XARCH)
 REVISION     := $(shell $(CP2KHOME)/tools/build_utils/get_revision_number $(SRCDIR))
 
 EXTSDIR      := exts
@@ -48,15 +48,15 @@ MODDEPS = "lower"
 # this only happens on stage 3 and 4
 ifneq ($(ONEVERSION),)
 MODDEPS = "lower"
-include $(ARCHDIR)/$(ARCH).$(ONEVERSION)
-LIBDIR  := $(MAINLIBDIR)/$(ARCH)/$(ONEVERSION)
+include $(ARCHDIR)/$(XARCH).$(ONEVERSION)
+LIBDIR  := $(MAINLIBDIR)/$(XARCH)/$(ONEVERSION)
 PKGCONFIGDIR  := $(LIBDIR)/pkgconfig
 PKGCONFIG  := $(PKGCONFIGDIR)/libcp2k.pc
 LIBEXTSDIR := $(LIBDIR)/$(EXTSDIR)
-OBJDIR  := $(MAINOBJDIR)/$(ARCH)/$(ONEVERSION)
+OBJDIR  := $(MAINOBJDIR)/$(XARCH)/$(ONEVERSION)
 OBJEXTSDIR := $(OBJDIR)/$(EXTSDIR)
 OBJEXTSINCL := $(foreach dir,$(EXTSPACKAGES),-I'$(OBJEXTSDIR)/$(dir)')
-TSTDIR     := $(MAINTSTDIR)/$(ARCH)/$(ONEVERSION)
+TSTDIR     := $(MAINTSTDIR)/$(XARCH)/$(ONEVERSION)
 ifneq ($(LD_SHARED),)
 	ARCHIVE_EXT := .so
 else
@@ -147,7 +147,7 @@ test: dirs makedep all
 
 # compilation for testing happens here
 test: dirs makedep all
-	@$(TOOLSRC)/regtesting/print_environment.sh $(ARCH) $(ONEVERSION)
+	@$(TOOLSRC)/regtesting/print_environment.sh $(XARCH) $(ONEVERSION)
 	@+$(MAKE) --no-print-directory -C $(TSTDIR) -f $(MAKEFILE) test INCLUDE_DEPS=true
 
 testbg: dirs makedep all
@@ -310,9 +310,9 @@ clean:
 	$(shell test -d $(1) && find $(1) -type f -name "*.*" ! -name "*.gcda" | sed 's|.*\.||' | sort -u)
 endef
 clean:
-	@echo rm -rf $(foreach v, $(VERSION), $(MAINOBJDIR)/$(ARCH)/$(v))
-	@$(foreach v, $(VERSION), $(foreach ext, $(call get_extensions, $(MAINOBJDIR)/$(ARCH)/$(v)/), $(shell rm -rf $(MAINOBJDIR)/$(ARCH)/$(v)/*.$(ext))))
-	rm -rf $(foreach v, $(VERSION), $(MAINLIBDIR)/$(ARCH)/$(v))
+	@echo rm -rf $(foreach v, $(VERSION), $(MAINOBJDIR)/$(XARCH)/$(v))
+	@$(foreach v, $(VERSION), $(foreach ext, $(call get_extensions, $(MAINOBJDIR)/$(XARCH)/$(v)/), $(shell rm -rf $(MAINOBJDIR)/$(XARCH)/$(v)/*.$(ext))))
+	rm -rf $(foreach v, $(VERSION), $(MAINLIBDIR)/$(XARCH)/$(v))
 OTHER_HELP += "clean : Remove intermediate object and mod files, but not the libraries and executables, for given ARCH and VERSION"
 
 # The Intel compiler creates a corresponding .dbg file for each executable when static linking of the Intel MPI library is requested (flag -static_mpi)
@@ -499,7 +499,7 @@ cp2k_info.o: $(GIT_REF)
 cp2k_info.o: $(GIT_REF)
 
 # Add some practical metadata about the build.
-FCFLAGS += -D__COMPILE_ARCH="\"$(ARCH)\""\
+FCFLAGS += -D__COMPILE_ARCH="\"$(XARCH)\""\
         -D__COMPILE_DATE="\"$(shell date)\""\
         -D__COMPILE_HOST="\"$(shell hostname 2>/dev/null || hostnamectl --transient)\""\
         -D__COMPILE_REVISION="\"$(strip $(REVISION))\""\
